<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuiz Bijak Sifir</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* Muatkan font 'Inter' */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        
        /* Gaya Standard */
        .result-score {
            animation: pulse-score 1.5s infinite;
        }
        @keyframes pulse-score {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(236, 72, 153, 0.7); /* Pink 500 Shadow */ }
            100% { transform: scale(1); }
        }
        .urgent-timer {
            color: #fff; 
            background-color: #ef4444; 
            border-color: #fca5a5; 
            animation: urgent-pulse 0.5s infinite;
        }
        @keyframes urgent-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .tp-hidden {
             display: none;
        }

        /* --- PENGOPTIMUMAN PRATONTON SIJIL (MOBILE/PC) --- */
        #certificate-screen {
            overflow-y: auto; 
            background-color: #f3f4f6; /* Latar belakang kelabu lembut di luar sijil */
        }
        
        #certificate-content {
            /* Menjadikan sijil kelihatan seperti kertas dalam pratonton */
            border: 4px solid #f9a8d4; /* Warna pink yang lebih lembut */
            box-shadow: 0 10px 20px rgba(0,0,0,0.15); /* Bayangan yang lebih kuat */
        }

        /* Responsive untuk elemen sijil */
        @media (max-width: 768px) {
            #certificate-content {
                padding: 1rem !important; /* Kurangkan padding pada telefon */
                margin-top: 1rem;
                margin-bottom: 1rem;
            }
            #cert-student-name {
                font-size: 2.5rem !important; /* Saiz nama lebih sesuai untuk mobile */
            }
            .text-3xl { font-size: 1.5rem !important; }
            .text-5xl { font-size: 3rem !important; }
            .text-6xl { font-size: 4rem !important; }

            .flex-col > * { 
                width: 100%;
                margin-left: 0 !important;
                margin-right: 0 !important;
            }
        }
        /* --- AKHIR PENGOPTIMUMAN PRATONTON SIJIL --- */

        /* Gaya untuk Cetakan Sijil (Kekal A4) */
        @media print {
            body {
                margin: 0;
                padding: 0;
                background-color: white !important;
                display: block; 
            }
            
            #quiz-container-wrapper, #cert-controls {
                display: none !important;
            }
            
            #certificate-screen {
                position: static !important;
                display: block !important;
                margin: auto;
                padding: 0; 
                max-width: 210mm; /* Lebar A4 */
                max-height: 297mm; /* Tinggi A4 */
                overflow: hidden; 
            }
            
            #certificate-content {
                box-shadow: none !important;
                border: none !important;
                min-height: 280mm; 
                padding: 1.5cm !important;
            }

            .print\:hidden {
                display: none !important;
            }
        }
		
    </style>
</head>
<body class="bg-yellow-50 min-h-screen flex items-center justify-center p-4">
	<div id="quiz-container-wrapper" class="w-full max-w-md bg-white p-6 rounded-xl shadow-xl border-3 border-pink-300">
		
		<div class="flex flex-col items-center justify-center mb-5">
            <img src="https://raw.githubusercontent.com/mizz85/nota-sifir/main/logo-mizzz.png" alt="Logo Edukids by Mizz" class="w-40 h-auto mb-2">
            <h1 class="text-2xl font-extrabold text-teal-600 text-center">
                Kuiz Bijak Sifir
            </h1>
            </div>

        <div id="quiz-container">
            
            <div id="login-screen" class="space-y-4">
                <p class="text-gray-600 text-center text-sm font-semibold">
                    Akses terhad. Sila masukkan Kata Laluan untuk meneruskan.
                </p>

                <div class="space-y-2">
                    <label for="password-input" class="block text-sm font-medium text-gray-700">Kata Laluan:</label>
                    <input type="text" id="password-input" placeholder="Masukkan Kata Laluan" class="w-full p-3 text-center text-lg font-bold border-3 border-pink-400 rounded-lg focus:border-teal-500 focus:ring-4 focus:ring-teal-200" onkeydown="handleLoginKey(event)" autofocus>
                    <p id="login-feedback" class="h-6 text-sm font-semibold text-red-600 text-center"></p>
                </div>

                <button onclick="checkPassword()" id="login-button" class="w-full bg-pink-500 hover:bg-pink-600 text-white font-black text-base py-3 rounded-lg transition duration-150 shadow-lg hover:shadow-xl">
                    Log Masuk
                </button>
               <p class="text-xs text-gray-500 text-center mt-3">
    Lupa atau Tiada Kata Laluan?
    <a href="https://wa.me/60198950339?text=Assalamualaikum.%20Saya%20memohon%20kata%20laluan%20untuk%20Kuiz%20Bijak%20Sifir.%20Nama%20saya%20[Nama%20Pelajar/Ibu%20Bapa]." target="_blank" class="font-bold text-pink-500 hover:text-pink-600 transition duration-150">
        Minta Kata Laluan (WhatsApp Mizz).
    </a>
</p>
            </div>
            
            <div id="selection-screen" class="hidden space-y-4">
                
                <div class="space-y-2 p-3 bg-teal-50 rounded-lg border border-teal-300">
                    <label for="student-name-input" class="block text-sm font-black text-teal-700">
                        Masukkan Nama Pelajar:
                    </label>
                    <input 
                        type="text" 
                        id="student-name-input" 
                        placeholder="Cth: Sofea Binti Shamsul" 
                        class="w-full p-3 text-center text-base font-bold border-2 border-teal-500 rounded-lg focus:border-pink-500 focus:ring-2 focus:ring-pink-200" 
                        oninput="updateAndSaveName(event)"
                    >
                    <p id="current-name-display" class="text-xs text-gray-600 italic mt-1 text-center"></p>
                </div>

                <div class="flex items-center justify-between p-3 bg-gray-100 rounded-lg border border-gray-300">
                    <label for="audio-toggle" class="text-sm font-black text-gray-700">
                        Bunyi & Suara (TTS)
                    </label>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="audio-toggle" class="sr-only peer" checked>
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-pink-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white peer-checked:after:bg-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-pink-500"></div>
                    </label>
                </div>
                <p class="text-gray-600 text-center text-sm">
                    Sila pilih jenis kuiz dan sifir yang ingin diuji.
                </p>

                <div class="space-y-2">
                    <label for="sifir-pilihan" class="block text-sm font-medium text-gray-700">Pilih Jenis Ujian:</label>
                    <select id="sifir-pilihan" class="w-full p-3 border-2 border-pink-400 rounded-lg shadow-md focus:ring-teal-500 focus:border-teal-500 bg-white text-teal-700 font-semibold text-sm">
                        <option value="0-objective-50">üéØ Semua Sifir (1-12) - Objektif A/B/C/D (50 Soalan)</option>
                        <option value="0-input-50">‚úçÔ∏è Semua Sifir (1-12) - Input Jawapan (50 Soalan)</option>
                        
                        <option disabled>--- Sifir Tunggal (30 Soalan) ---</option>
                        <option value="2-objective-30">üéØ Sifir 2 - Objektif (30 Soalan, 7s)</option>
                        <option value="3-objective-30">üéØ Sifir 3 - Objektif (30 Soalan, 7s)</option>
                        <option value="4-objective-30">üéØ Sifir 4 - Objektif (30 Soalan, 7s)</option>
                        <option value="5-objective-30">üéØ Sifir 5 - Objektif (30 Soalan, 7s)</option>
                        <option value="6-objective-30">üéØ Sifir 6 - Objektif (30 Soalan, 7s)</option>
                        <option value="7-objective-30">üéØ Sifir 7 - Objektif (30 Soalan, 7s)</option>
                        <option value="8-objective-30">üéØ Sifir 8 - Objektif (30 Soalan, 7s)</option>
                        <option value="9-objective-30">üéØ Sifir 9 - Objektif (30 Soalan, 7s)</option>
                        <option value="10-objective-30">üéØ Sifir 10 - Objektif (30 Soalan, 7s)</option>
                        <option value="11-objective-30">üéØ Sifir 11 - Objektif (30 Soalan, 7s)</option>
                        <option value="12-objective-30">üéØ Sifir 12 - Objektif (30 Soalan, 7s)</option>
                        
                        <option value="2-input-30">‚úçÔ∏è Sifir 2 (30 Soalan, 10s)</option>
                        <option value="3-input-30">‚úçÔ∏è Sifir 3 (30 Soalan, 10s)</option>
                        <option value="4-input-30">‚úçÔ∏è Sifir 4 (30 Soalan, 10s)</option>
                        <option value="5-input-30">‚úçÔ∏è Sifir 5 (30 Soalan, 10s)</option>
                        <option value="6-input-30">‚úçÔ∏è Sifir 6 (30 Soalan, 10s)</option>
                        <option value="7-input-30">‚úçÔ∏è Sifir 7 (30 Soalan, 10s)</option>
                        <option value="8-input-30">‚úçÔ∏è Sifir 8 (30 Soalan, 10s)</option>
                        <option value="9-input-30">‚úçÔ∏è Sifir 9 (30 Soalan, 10s)</option>
                        <option value="10-input-30">‚úçÔ∏è Sifir 10 (30 Soalan, 10s)</option>
                        <option value="11-input-30">‚úçÔ∏è Sifir 11 (30 Soalan, 10s)</option>
                        <option value="12-input-30">‚úçÔ∏è Sifir 12 (30 Soalan, 10s)</option>
                    </select>
                </div>

                <button onclick="startQuizFlow()" id="start-button" class="w-full bg-pink-500 hover:bg-pink-600 text-white font-black text-base py-3 rounded-lg transition duration-150 shadow-lg hover:shadow-xl">
                    Mulakan Kuiz
                </button>

                <button onclick="logoutAndClear()" class="w-full bg-gray-200 text-gray-700 hover:bg-gray-300 font-semibold text-sm py-2 rounded-lg transition duration-150 shadow-sm mt-4">
                    ‚û°Ô∏è Log Keluar (Tukar Kata Laluan)
                </button>
                </div>

            <div id="quiz-screen" class="hidden text-center space-y-4">
                
                <div class="w-full flex justify-between items-center mb-3">
                    <div class="w-3/4 bg-gray-200 rounded-full h-3">
                        <div id="progress-bar" class="bg-pink-500 h-3 rounded-full transition-all duration-300 ease-out" style="width: 0%"></div>
                    </div>
                    <div id="q-countdown-display" class="text-lg font-black text-teal-600 border-2 border-teal-300 px-3 py-0.5 rounded-full shadow-md transition-colors duration-300">
                        7s
                    </div>
                </div>

                <p class="text-xs text-gray-500">
                    Soalan <span id="current-q-num">1</span> dari <span id="total-q-display">50</span>
                </p>
                <span id="total-time-tracker" class="hidden">0</span>

                <div class="bg-yellow-200 p-6 rounded-xl shadow-lg border-2 border-yellow-500">
                    <p class="text-lg text-gray-500 mb-1">Berapakah</p>
                    <p id="question-text" class="text-4xl font-extrabold text-teal-800">
                        7 x 8 ?
                    </p>
                </div>

                <div id="input-mode" class="space-y-3">
                    <input type="number" id="answer-input" placeholder="Jawab di sini" class="w-full p-3 text-center text-2xl font-bold border-3 border-pink-400 rounded-lg focus:border-teal-500 focus:ring-4 focus:ring-teal-200" onkeydown="handleInputKey(event)" autofocus>

                    <button onclick="handleInputSubmission()" class="w-full bg-lime-500 hover:bg-lime-600 text-white font-black text-base py-3 rounded-lg transition duration-150 shadow-lg hover:shadow-xl">
                        Hantar Jawapan
                    </button>
                </div>

                <div id="objective-mode" class="hidden grid grid-cols-2 gap-3">
                    <button id="option-A" onclick="handleObjectiveSubmission(this)" data-value="" class="objective-btn p-3 text-xl font-bold text-white bg-teal-500 rounded-lg hover:bg-teal-600 transition duration-150 shadow-md">
                        A. <span></span>
                    </button>
                    <button id="option-B" onclick="handleObjectiveSubmission(this)" data-value="" class="objective-btn p-3 text-xl font-bold text-white bg-teal-500 rounded-lg hover:bg-teal-600 transition duration-150 shadow-md">
                        B. <span></span>
                    </button>
                    <button id="option-C" onclick="handleObjectiveSubmission(this)" data-value="" class="objective-btn p-3 text-xl font-bold text-white bg-teal-500 rounded-lg hover:bg-teal-600 transition duration-150 shadow-md">
                        C. <span></span>
                    </button>
                    <button id="option-D" onclick="handleObjectiveSubmission(this)" data-value="" class="objective-btn p-3 text-xl font-bold text-white bg-teal-500 rounded-lg hover:bg-
